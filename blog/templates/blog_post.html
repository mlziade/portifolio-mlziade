{% extends 'blog_base.html' %}
{% load static %}

{% block title %}{{ post.title }} - Blog{% endblock %}

{% block extra_css %}
<style>
  .post-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .post-title {
    color: var(--text-primary);
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    line-height: 1.15;
    letter-spacing: -0.02em;
  }

  .post-meta {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    flex-wrap: wrap;
    color: #888;
    font-size: 0.85rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    margin-bottom: 2.5rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid #333;
  }

  .post-meta-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .post-meta svg {
    flex-shrink: 0;
    opacity: 0.5;
  }

  .post-tags {
    display: inline;
  }

  .tag {
    color: #666;
    text-decoration: none;
    font-size: 0.85rem;
    transition: color 0.2s ease;
    font-weight: 400;
  }

  .tag:hover {
    color: #4a9eff;
  }

  .post-thumbnail-wrapper {
    width: 100%;
    margin: 2rem 0;
    border-radius: 8px;
    overflow: hidden;
  }

  .post-thumbnail-wrapper img {
    width: 100%;
    height: auto;
    display: block;
  }

  .post-content {
    color: #d0d0d0;
    line-height: 1.75;
    font-size: 1.125rem;
    font-family: Georgia, 'Times New Roman', serif;
    font-weight: 400;
  }

  .post-content h1,
  .post-content h2,
  .post-content h3,
  .post-content h4,
  .post-content h5,
  .post-content h6 {
    color: #f5f5f5;
    margin-top: 2.5rem;
    margin-bottom: 1.25rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 600;
    letter-spacing: -0.01em;
  }

  .post-content h2 {
    font-size: 1.875rem;
    border-bottom: none;
    padding-bottom: 0;
  }

  .post-content h3 {
    font-size: 1.5rem;
    color: #e0e0e0;
  }

  .post-content p {
    margin-bottom: 1.5rem;
  }

  .post-content p:first-of-type {
    font-size: 1.25rem;
    color: #e5e5e5;
    line-height: 1.6;
  }

  .post-content a {
    color: #4a9eff;
    text-decoration: underline;
  }

  .post-content a:hover {
    color: #6bb0ff;
  }

  .post-content ul,
  .post-content ol {
    margin-bottom: 1.5rem;
    padding-left: 2rem;
  }

  .post-content li {
    margin-bottom: 0.5rem;
  }

  .post-content code {
    background-color: #1a1a1a;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
  }

  .post-content pre {
    background-color: #1a1a1a;
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1.5rem;
  }

  .post-content pre code {
    background-color: transparent;
    padding: 0;
  }

  .post-content blockquote {
    border-left: 4px solid #4a9eff;
    padding-left: 1.5rem;
    margin: 1.5rem 0;
    font-style: italic;
    color: var(--text-secondary);
  }

  .post-content img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 1.5rem 0;
  }

  .post-navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid #2a2a2a;
  }

  .back-to-blog {
    color: #4a9eff;
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    transition: background-color 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .back-to-blog:hover {
    background-color: #2a2a2a;
  }

  @media (max-width: 768px) {
    .post-title {
      font-size: 2rem;
      letter-spacing: -0.015em;
    }

    .post-content {
      font-size: 1.0625rem;
    }

    .post-content p:first-of-type {
      font-size: 1.125rem;
    }
  }
</style>
{% endblock %}

{% block content %}
<article class="post-container">
  <h1 class="post-title">{{ post.title }}</h1>

  <div class="post-meta">
    <span class="post-meta-item">
      <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
      </svg>
      {{ post.published_date|date:"M d, Y" }}
    </span>

    {% if post.tags.exists %}
    <span class="post-meta-item">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M21.07 10.3L15.07 4.29996C14.93 4.15996 14.74 4.07996 14.54 4.07996H3C2.59 4.07996 2.25 4.41996 2.25 4.82996V12.71C2.25 12.91 2.33 13.1 2.47 13.24L8.47 19.23C8.91 19.67 9.49 19.91 10.11 19.91C10.73 19.91 11.32 19.67 11.75 19.23L11.97 19.01C12.01 19.09 12.05 19.17 12.12 19.23C12.57 19.68 13.17 19.91 13.76 19.91C14.35 19.91 14.95 19.68 15.41 19.23L21.06 13.58C21.96 12.68 21.96 11.21 21.06 10.3H21.07ZM10.7 18.17C10.54 18.33 10.34 18.41 10.12 18.41C9.9 18.41 9.69 18.32 9.54 18.17L3.75 12.4V5.57996H10.57L16.35 11.36C16.67 11.68 16.67 12.2 16.35 12.52L10.7 18.17ZM20.01 12.52L14.36 18.17C14.04 18.49 13.51 18.49 13.19 18.17C13.12 18.1 13.05 18.06 12.96 18.02L17.4 13.58C18.3 12.67 18.3 11.2 17.4 10.3L12.68 5.57996H14.22L20 11.36C20.32 11.68 20.32 12.2 20 12.52H20.01ZM8.25 8.49996C8.25 9.18996 7.69 9.74996 7 9.74996C6.31 9.74996 5.75 9.18996 5.75 8.49996C5.75 7.80996 6.31 7.24996 7 7.24996C7.69 7.24996 8.25 7.80996 8.25 8.49996Z"/>
      </svg>
      <span class="post-tags">
        {% for tag in post.tags.all %}
        <a href="{% url 'blog:blog_home' %}?tag={{ tag.slug }}" class="tag">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </span>
    </span>
    {% endif %}
  </div>

  {% if post.thumbnail %}
  <div class="post-thumbnail-wrapper">
    <img src="{% static 'blog/files/thumbnails/' %}{{ post.thumbnail }}" alt="{{ post.title }}" loading="lazy">
  </div>
  {% endif %}

  <div class="post-content">
    {{ content|safe }}
  </div>

  <nav class="post-navigation">
    <a href="{% url 'blog:blog_home' %}" class="back-to-blog">
      <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
      </svg>
      Back to Blog
    </a>
  </nav>
</article>
{% endblock %}
